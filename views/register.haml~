Register
%br/
%br/
%form{:method => "post"}
  Email:
  %input{:type=>'text', :size=>20, :name=>'user[email]'}
  %br/
  Password:
  %input{:type=>'text', :size=>20, :name=>'user[password]'}
  %br/
  Password Confirmation:
  %input{:type=>'text', :size=>20, :name=>'user[password_confirmation]'}
  %br/
  %input{:type=>'submit', :value=>'Register'}

def cookies
  unless defined? @cookies
    class << @cookies = Object.new
      def []= ( key, value )
        Authlogic::Session::Base.controller.response.set_cookie key, value
      end
      def method_missing( meth, *args, &block )
        Authlogic::Session::Base.controller.request.cookies.send meth, *args, &block
      end
      def delete( key, value = {} )
        Authlogic::Session::Base.controller.response.delete_cookie key, value
      end
    end
  end
  @cookies
end

class FakeArray
  methods.each { |m| undef_method m unless m =~ /(^__|^send$|^object_id$)/ }
  #class_methods.each { |m| undef_method m unless m =~ /(^__|^send$|^object_id$)/ }
  def method_missing(m, *args, &block)
    target.send m, *args, &block
  end
  def self.method_missing(m, *args, &block)
    target.class.send m, *args, &block
  end
  def target
    @target ||= []
  end
end

